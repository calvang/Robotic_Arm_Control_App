(this.webpackJsonpcontrol_app=this.webpackJsonpcontrol_app||[]).push([[0],{25:function(e){e.exports=JSON.parse('{"a":[{"name":"Simple Movement","desc":"A sequence of basic movements","data":[[1,1,1],[1,2,1],[2,1,1]]}]}')},58:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),a=n(28),c=n.n(a),s=(n(58),n(10)),i=n(7),l=n(5),j=n(6),b=n(79),d=n(81),u=n(82),O=n(83),h=n(84),f=n(85),g=n(86),p=n(11),x=n(87),m=n(25),_=["x","y","z"],v=function(e){return Object(r.jsxs)("td",{children:[Object(r.jsx)("label",{children:_[e.index]}),Object(r.jsx)("input",{className:"PopupField",type:"text",name:_[e.index],value:e.target[e.index],onChange:function(t){var n=Object(s.a)(e.target);n[e.index]=t.target.value,e.setTarget(n)}})]})},y=function(e){return Object(r.jsxs)("div",{className:"Popup",children:[Object(r.jsx)("b",{children:"Target Coordinates"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(r.jsx)("table",{children:Object(r.jsx)("tbody",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)(v,{target:e.target,setTarget:e.setTarget,index:0}),Object(r.jsx)(v,{target:e.target,setTarget:e.setTarget,index:1}),Object(r.jsx)(v,{target:e.target,setTarget:e.setTarget,index:2})]})})}),Object(r.jsx)("input",{type:"submit",style:{display:"none"}})]})]})},w=[{field:"name",headerName:"Task",width:70},{field:"length",headerName:"Length",width:30},{field:"desc",headerName:"Description",width:200}],S=function(){var e=Object(o.useState)(!0),t=Object(j.a)(e,2),n=(t[0],t[1],Object(o.useState)(function(){var e=[];for(var t in m.a)e.push({name:m.a[t].name,length:m.a[t].data.length,desc:m.a[t].desc});return e}())),a=Object(j.a)(n,2),c=a[0];a[1];return Object(r.jsxs)("div",{className:"Menu",children:[Object(r.jsx)("div",{className:"MenuHeader",children:Object(r.jsx)("h3",{children:"TASKS"})}),Object(r.jsxs)("div",{className:"MenuBody",style:{height:"calc(100vh - 56px"},children:[Object(r.jsx)("br",{}),Object(r.jsx)(b.a,{component:d.a,children:Object(r.jsxs)(u.a,{"aria-label":"tasks table",children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(h.a,{children:w.map((function(e){return Object(r.jsx)(f.a,{style:{width:e.width},children:Object(r.jsx)("b",{children:e.headerName})},e.field)}))})}),Object(r.jsx)(g.a,{children:c.map((function(e,t){return Object(r.jsxs)(h.a,{children:[Object(r.jsx)(f.a,{scope:"row",children:e.name}),Object(r.jsx)(f.a,{children:e.length}),Object(r.jsx)(f.a,{children:e.desc})]},t)}))})]})})]})]})},k=function(e){var t=Object(o.useState)(!1),n=Object(j.a)(t,2),a=n[0],c=n[1],s=e.mode,i=function(e){c(!a)};return Object(r.jsx)("div",{className:"Record ".concat(s?"RecordAuto":"RecordControl"),children:a?Object(r.jsxs)(r.Fragment,{children:["Stop Recording:\xa0\xa0",Object(r.jsx)("button",{className:"RecordButton",onClick:i,children:Object(r.jsx)("i",{className:"fa fa-stop-circle fa-lg"})})]}):Object(r.jsxs)(r.Fragment,{children:["Start Recording:\xa0\xa0",Object(r.jsx)("button",{className:"RecordButton",onClick:i,children:Object(r.jsx)("i",{className:"fa fa-circle fa-lg"})})]})})},M=Object(p.a)({root:{color:"#2469c4",height:8,width:"90%"},thumb:{height:14,width:14,backgroundColor:"#cbcdcf",marginTop:-3,marginLeft:-7,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-64%)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(x.a),C=function(e){return Object(r.jsxs)("div",{className:"Menu",children:[Object(r.jsx)("div",{className:"MenuHeader",children:Object(r.jsx)("h3",{children:"Settings"})}),Object(r.jsxs)("div",{className:"MenuBody",children:[Object(r.jsx)("p",{children:"The following parameters are rotational velocities in radians per frame of movement."}),Object(r.jsx)("h4",{children:"Base Rotation"}),Object(r.jsx)(M,{value:e.base_theta_delta,valueLabelDisplay:"auto",track:"inverted",step:.01,min:.02,max:1,onChange:function(t,n){e.setBaseSpeed(n)}}),Object(r.jsx)("h4",{children:"Joint Rotation"}),Object(r.jsx)(M,{value:e.joints_theta_delta,valueLabelDisplay:"auto",track:"inverted",step:.01,min:.01,max:1,onChange:function(t,n){e.setJointSpeed(n)}}),Object(r.jsx)("h4",{children:"Wrist Rotation"}),Object(r.jsx)(M,{value:e.wrist_theta_delta,valueLabelDisplay:"auto",track:"inverted",step:.01,min:.01,max:1,onChange:function(t,n){e.setWristSpeed(n)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})]})},A=function(){return Object(r.jsxs)("div",{className:"Menu",children:[Object(r.jsx)("div",{className:"MenuHeader",children:Object(r.jsx)("h3",{children:"HELP"})}),Object(r.jsxs)("div",{className:"MenuBody",children:[Object(r.jsxs)("h4",{children:[Object(r.jsx)("i",{className:"fa fa-arrows fa-lg"})," Control Mode"]}),Object(r.jsxs)("p",{children:["In control mode, the arm is directly controlled via the following keybindings:",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("code",{children:"ArrowRight/ArrowLeft"})," - Base E Yaw",Object(r.jsx)("br",{}),Object(r.jsx)("code",{children:"ArrowUp/ArrowDown"})," - Joint D Pitch",Object(r.jsx)("br",{}),Object(r.jsx)("code",{children:"R/F"})," - Joint C Pitch",Object(r.jsx)("br",{}),Object(r.jsx)("code",{children:"W/S"})," - Joint B Pitch",Object(r.jsx)("br",{}),Object(r.jsx)("code",{children:"D/A"})," - Wrist A Roll",Object(r.jsx)("br",{}),Object(r.jsx)("code",{children:"X/Z"})," - End Effector Open/Close",Object(r.jsx)("br",{}),"Tasks can be recorded in this mode by pressing the record button ",Object(r.jsx)("i",{className:"fa fa-plus-square-o fa-lg"}),"."]}),Object(r.jsxs)("h4",{children:[Object(r.jsx)("i",{className:"fa fa-magic fa-lg"})," Automatic Mode"]}),Object(r.jsxs)("p",{children:["In automatic mode, keyboard controls for the arm except for those for the wrist and claw are disabled, and the arm uses inverse kinematics the navigate by following inputed coordinates.",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),"Target coordinates are indicated by an orange point can be changed through a popup tool or by dragging the point around. To drag the point, click the object to disable orbit controls and then use the mouse to drag it. Tasks can be recorded in this mode by pressing the record button ",Object(r.jsx)("i",{className:"fa fa-plus-square-o fa-lg"}),"."]}),Object(r.jsxs)("h4",{children:[Object(r.jsx)("i",{className:"fa fa-files-o fa-lg"})," Tasks"]}),Object(r.jsxs)("p",{children:["Tasks are lists of instructions that can program the arm to move in a predetermined pattern. ",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),"Example instruction with arm angles:"]}),Object(r.jsxs)("pre",{children:["# Schema: angles in degrees ",Object(r.jsx)("br",{}),"# E  D  C  B  A ",Object(r.jsx)("br",{}),"90 40 30 90 120"]}),Object(r.jsx)("p",{children:"Example instruction with target positions: "}),Object(r.jsxs)("pre",{children:["# Schema: end effector positon ",Object(r.jsx)("br",{}),"# x   y   z ",Object(r.jsx)("br",{}),"1.56 5.87 2.35"]})]})]})},B=function(e){return Object(r.jsx)("li",{className:e.active?"active_opt":"",children:Object(r.jsx)("button",{onClick:e.handler,children:Object(r.jsx)("i",{className:"fa ".concat(e.icon," fa-2x")})})})};function I(e){var t=Object(o.useState)(!1),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(o.useState)(!1),i=Object(j.a)(s,2),l=i[0],b=i[1],d=Object(o.useState)(!1),u=Object(j.a)(d,2),O=u[0],h=u[1],f=Object(o.useState)(!1),g=Object(j.a)(f,2),p=g[0],x=g[1];return Object(r.jsxs)("div",{style:{color:"white",position:"absolute",zIndex:2},children:[Object(r.jsxs)("ul",{children:[Object(r.jsx)(B,{icon:"fa-arrows",handler:e.setControlMode,active:!e.mode}),Object(r.jsx)(B,{icon:"fa-magic",handler:e.setAutomaticMode,active:e.mode}),Object(r.jsx)(B,{icon:"fa-files-o",handler:function(){l?b(!1):(a?c(!1):O&&h(!1),b(!0))},active:l}),Object(r.jsx)(B,{icon:"fa-plus-square-o",handler:function(){x(!p)},active:p}),Object(r.jsx)(B,{icon:"fa-tasks",handler:function(){O?h(!1):(l?b(!1):a&&c(!1),h(!0))},active:O}),Object(r.jsx)(B,{icon:"fa-question-circle-o",handler:function(){a?c(!1):(l?b(!1):O&&h(!1),c(!0))},active:a})]}),e.mode&&Object(r.jsx)(y,{target:e.target,setTarget:e.setTarget}),l&&Object(r.jsx)(S,{}),p&&Object(r.jsx)(k,{mode:e.mode,record:p}),O&&Object(r.jsx)(C,{base_theta_delta:e.base_theta_delta,joints_theta_delta:e.joints_theta_delta,wrist_theta_delta:e.wrist_theta_delta,setBaseSpeed:e.setBaseSpeed,setJointSpeed:e.setJointSpeed,setWristSpeed:e.setWristSpeed}),a&&Object(r.jsx)(A,{})]})}var P=n(13),T=n(50),R=n(45),E=n(46),K=n(2);function N(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function D(e){return Math.atan(e[1]/e[0])+Math.PI*(1-Math.sign(e[0]))/2}function H(e,t,n){for(var r=t[0],o=Object(s.a)(e[0]),a=1;a<t.length;++a)o[0]+=n[a]*Math.cos(r),o[1]+=n[a]*Math.sin(r),r+=t[a],e[a]=Object(s.a)(o);return e}function L(e,t,n,r,o){if(!(N([0,0],o)>r)){for(var a=H(e,t,n)[e.length-1],c=N(a,o),s=function(t,r,o){var a=N(e[t],e[r]),c=n[o]/a;e[r][0]=(1-c)*e[t][0]+c*e[r][0],e[r][1]=(1-c)*e[t][1]+c*e[r][1]};c>.01;){e[e.length-1]=o;for(var i=e.length-2;i>0;--i)s(i+1,i,i+1);for(var l=1;l<e.length-1;++l)s(l,l+1,l+1);c=N(a=e[e.length-1],o)}return function(e,t){for(var n=0,r=[0,0],o=1;o<t.length;++o){r[0]=e[o][0]-e[o-1][0],r[1]=e[o][1]-e[o-1][1];var a=D(r)-n;a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),t[o-1]=a,n+=a}return t}(e,t)}console.error("Target out of range:",o)}Object(P.b)({OrbitControls:R.a,DragControls:E.a});var F=new K.Vector3(1,0,0),J=new K.Vector3(0,0,1),q=.01,z=[.35,.81,0],W=[.05,.15,.6],G=[.5,.5,.5],U=(Math.PI,Math.PI,[Math.PI/2,-Math.PI/2,-Math.PI/2,0]),V=[0,1.58,1.403,1.54],Z=V.reduce((function(e,t){return e+t})),X={Finger1:{file:"models/linkage_finger1.obj",color:G,position:[1.04,-.11,.15],rotation:[Math.PI,0,Math.PI],joint:[0,.14,.225],pos_key:"x",neg_key:"z"},Finger2:{file:"models/linkage_finger2.obj",color:G,position:[1.04,.455,.05],rotation:[Math.PI,Math.PI,0],joint:[0,.12,.225],pos_key:"x",neg_key:"z"},HandCover:{file:"models/moment_body.obj",color:G,position:[.666,0,.072],rotation:[0,Math.PI,0]},HandBase:{file:"models/torque_base.obj",color:G,position:[.668,0,.176],rotation:[0,Math.PI,0]},HandCase:{file:"models/torque_servo.obj",color:W,position:[-.42,.08,.05],rotation:[-Math.PI/2,0,Math.PI],joint:[0,.16,.225],pos_key:"a",neg_key:"d"},AB:{file:"models/AB_stepper.obj",color:G,position:[1.76,-.2,-.46],rotation:[0,0,Math.PI/2],joint:[1.58,.28,0],bounds:[-125,125],pos_key:"w",neg_key:"s"},BC:{file:"models/BC.obj",color:W,position:[.22,.38,.47],rotation:[Math.PI,Math.PI,Math.PI/2],joint:[.46,.18,0],bounds:[-125,125],pos_key:"r",neg_key:"f"},CD:{file:"models/CD.obj",color:G,position:[.35,1.93,-.22],rotation:[-Math.PI,Math.PI,-Math.PI/2],joint:[.16,.81,0],bounds:[0,180],pos_key:"ArrowUp",neg_key:"ArrowDown"},BaseE1:{file:"models/BaseEnew.obj",color:W,position:[.32,-.02,.26],rotation:[-Math.PI/2,.24,Math.PI]},BaseE2:{file:"models/BaseEnewother.obj",color:W,position:[-.38,.14,.26],rotation:[-Math.PI/2,.24,0]},TurnTable:{file:"models/newTurntable.obj",color:W,position:[0,0,0],rotation:[Math.PI/2,Math.PI,-Math.PI/2]}},Y=function(e){var t=Object(o.useRef)(),n=Object(P.d)(T.a,e.file);return n.traverse((function(t){t instanceof K.Mesh&&(t.material=new K.MeshPhongMaterial,t.material.color.setRGB(e.color[0],e.color[1],e.color[2]))})),n.scale.set(q,q,q),Object(r.jsx)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:Object(r.jsx)("primitive",{object:n})}))},$=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)();function a(e,n){t.current&&(t.current.position.sub(e),t.current.position.applyAxisAngle(J,n),t.current.position.add(e))}return Object(P.c)((function(){n.current&&(e.controlKeys[X.Finger1.pos_key]&&e.clawStep<60?(e.setClawStep(e.clawStep+1),a(n.current,-.004)):e.controlKeys[X.Finger1.neg_key]&&e.clawStep>=0&&(e.setClawStep(e.clawStep-1),a(n.current,.004)))})),Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:[Object(r.jsx)(Y,{file:e.file,color:e.color}),Object(r.jsx)("vector3",{ref:n,args:X.Finger1.joint})]}))},Q=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)();function a(e,n){t.current&&(t.current.position.sub(e),t.current.position.applyAxisAngle(J,-n),t.current.position.add(e))}return Object(P.c)((function(){n.current&&(e.controlKeys[X.Finger2.pos_key]&&e.clawStep<60?(e.setClawStep(e.clawStep+1),a(n.current,-.004)):e.controlKeys[X.Finger2.neg_key]&&e.clawStep>=0&&(e.setClawStep(e.clawStep-1),a(n.current,.004)))})),Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:[Object(r.jsx)(Y,{file:e.file,color:e.color}),Object(r.jsx)("vector3",{ref:n,args:X.Finger2.joint})]}))},ee=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)(),a=Object(o.useState)(0),c=Object(j.a)(a,2),s=c[0],i=c[1];function b(e,n){t.current&&(t.current.position.sub(e),t.current.position.applyAxisAngle(F,n),t.current.position.add(e),t.current.rotateOnAxis(F,-n))}return Object(P.c)((function(){n.current&&(e.controlKeys[X.HandCase.pos_key]?b(n.current,+e.wrist_theta_delta):e.controlKeys[X.HandCase.neg_key]&&b(n.current,-e.wrist_theta_delta))})),Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:[Object(r.jsx)(Y,{file:e.file,color:e.color}),Object(r.jsx)("vector3",{ref:n,args:X.HandCase.joint}),Object(r.jsx)(Y,{file:X.HandBase.file,color:X.HandBase.color,position:X.HandBase.position,rotation:X.HandBase.rotation}),Object(r.jsx)(Y,{file:X.HandCover.file,color:X.HandCover.color,position:X.HandCover.position,rotation:X.HandCover.rotation}),Object(r.jsx)($,{controlKeys:e.controlKeys,file:X.Finger1.file,color:X.Finger1.color,position:X.Finger1.position,rotation:X.Finger1.rotation,clawStep:s,setClawStep:i}),Object(r.jsx)(Q,{controlKeys:e.controlKeys,file:X.Finger2.file,color:X.Finger2.color,position:X.Finger2.position,rotation:X.Finger2.rotation,clawStep:s,setClawStep:i})]}))},te=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)(),a=Object(o.useState)(U[2]),c=Object(j.a)(a,2),s=c[0],i=c[1];function b(e,n){t.current&&(t.current.position.sub(e),t.current.position.applyAxisAngle(J,n),t.current.position.add(e),t.current.rotateOnAxis(J,n))}return Object(P.c)((function(){var t=e.angles,r=e.setAngles,o=e.joints_theta_delta;if(n.current&&(e.controlKeys[X.AB.pos_key]?(b(n.current,+o),r([t[0],t[1],t[2]+o,0]),i(t[2]+o)):e.controlKeys[X.AB.neg_key]&&(b(n.current,-o),r([t[0],t[1],t[2]-o,0]),i(t[2]-o)),e.mode&&e.modeInit)){var a=e.angles[2]-s;Math.abs(a)<o?(b(n.current,a),i(e.angles[2])):e.angles[2]>s?(b(n.current,+o),i(s+o)):e.angles[2]<s&&(b(n.current,-o),i(s-o))}})),Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:[Object(r.jsx)(Y,{file:e.file,color:e.color}),Object(r.jsx)("vector3",{ref:n,args:X.AB.joint}),Object(r.jsx)(ee,{controlKeys:e.controlKeys,file:X.HandCase.file,color:X.HandCase.color,position:X.HandCase.position,rotation:X.HandCase.rotation,wrist_theta_delta:e.wrist_theta_delta})]}))},ne=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)(),a=Object(o.useState)(U[1]),c=Object(j.a)(a,2),s=c[0],i=c[1];function b(e,n){t.current&&(t.current.position.sub(e),t.current.position.applyAxisAngle(J,n),t.current.position.add(e),t.current.rotateOnAxis(J,n))}return Object(P.c)((function(){var t=e.angles,r=e.setAngles,o=e.joints_theta_delta;if(n.current&&(e.controlKeys[X.BC.pos_key]?(b(n.current,+o),r([t[0],t[1]+o,t[2],0]),i(t[1]+o)):e.controlKeys[X.BC.neg_key]&&(b(n.current,-o),r([t[0],t[1]-o,t[2],0]),i(t[1]-o)),e.mode&&e.modeInit)){var a=e.angles[1]-s;Math.abs(a)<o?(b(n.current,a),i(e.angles[1])):e.angles[1]>s?(b(n.current,+o),i(s+o)):e.angles[1]<s&&(b(n.current,-o),i(s-o))}})),Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:[Object(r.jsx)(Y,{file:e.file,color:e.color}),Object(r.jsx)("vector3",{ref:n,args:X.BC.joint}),Object(r.jsx)(te,{controlKeys:e.controlKeys,file:X.AB.file,color:X.AB.color,position:X.AB.position,rotation:X.AB.rotation,joints_theta_delta:e.joints_theta_delta,wrist_theta_delta:e.wrist_theta_delta,angles:e.angles,setAngles:e.setAngles,mode:e.mode,modeInit:e.modeInit})]}))},re=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)(),a=Object(o.useState)(U[0]),c=Object(j.a)(a,2),s=c[0],i=c[1];function b(e,n){t.current&&(t.current.position.sub(e),t.current.position.applyAxisAngle(J,n),t.current.position.add(e),t.current.rotateOnAxis(J,n))}return Object(P.c)((function(){var t=e.angles,r=e.setAngles,o=e.joints_theta_delta;if(n.current&&(e.controlKeys[X.CD.pos_key]?(b(n.current,+o),r([t[0]+o,t[1],t[2],0]),i(t[0]+o)):e.controlKeys[X.CD.neg_key]&&(b(n.current,-o),r([t[0]-o,t[1],t[2],0]),i(t[0]-o)),e.mode&&e.modeInit)){var a=e.angles[0]-s;Math.abs(a)<o?(b(n.current,a),i(e.angles[0])):e.angles[0]>s?(b(n.current,+o),i(s+o)):e.angles[0]<s&&(b(n.current,-o),i(s-o))}})),Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:[Object(r.jsx)(Y,{file:e.file,color:e.color}),Object(r.jsx)("vector3",{ref:n,args:X.CD.joint}),Object(r.jsx)(ne,{controlKeys:e.controlKeys,file:X.BC.file,color:X.BC.color,position:X.BC.position,rotation:X.BC.rotation,joints_theta_delta:e.joints_theta_delta,wrist_theta_delta:e.wrist_theta_delta,angles:e.angles,setAngles:e.setAngles,mode:e.mode,modeInit:e.modeInit})]}))},oe=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!1),a=Object(j.a)(n,2),c=a[0],i=a[1],b=Object(o.useState)(U),d=Object(j.a)(b,2),u=d[0],O=d[1],h=Object(o.useState)([[0,0],[0,0],[0,0],[0,0]]),f=Object(j.a)(h,2),g=f[0],p=f[1],x=Object(o.useState)(0),m=Object(j.a)(x,2),_=m[0],v=m[1],y=Object(o.useState)(0),w=Object(j.a)(y,2),S=w[0],k=w[1];function M(){var t=function(e){var t=[e[0],e[2]],n=D(t);return n>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI),{base_angle:n,target_2D:[N([0,0],t),e[1]]}}(e.target),n=t.base_angle,r=t.target_2D;r[1]-=z[1],n-_>Math.PI/2?(n=-(Math.PI-n),r[0]=-(r[0]+z[0])):n-_<-Math.PI/2?(n=Math.PI+n,r[0]=-(r[0]+z[0])):r[0]-=z[0],k(n);var o=L(Object(s.a)(g),Object(s.a)(u),V,Z,r);o&&O(o)}return Object(P.c)((function(){var n=e.mode,r=e.base_theta_delta;if(t.current){if(e.controlKeys.ArrowRight?(t.current.rotation.y-=r,k(S-r),v(_-r)):e.controlKeys.ArrowLeft&&(t.current.rotation.y+=r,k(S+r),v(_+r)),n&&!c){i(!0);var o=H(Object(s.a)(g),u,V);p(o)}else!n&&c&&i(!1);if(n&&c)M(),Math.abs(S-_)<r?(t.current.rotation.y=-S,v(S)):S>_?(t.current.rotation.y-=r,v(_+r)):S<_&&(t.current.rotation.y+=r,v(_-r))}})),Object(r.jsx)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,children:Object(r.jsxs)(o.Suspense,{fallback:Object(r.jsx)(ce,{position:[1.2,0,0]}),children:[Object(r.jsx)(re,{controlKeys:e.controlKeys,file:X.CD.file,color:X.CD.color,position:X.CD.position,rotation:X.CD.rotation,joints_theta_delta:e.joints_theta_delta,wrist_theta_delta:e.wrist_theta_delta,angles:u,setAngles:O,mode:e.mode,modeInit:c}),Object(r.jsx)(Y,{file:X.BaseE1.file,color:X.BaseE1.color,position:X.BaseE1.position,rotation:X.BaseE1.rotation}),Object(r.jsx)(Y,{file:X.BaseE2.file,color:X.BaseE2.color,position:X.BaseE2.position,rotation:X.BaseE2.rotation}),Object(r.jsx)(Y,{file:X.TurnTable.file,color:X.TurnTable.color,position:X.TurnTable.position,rotation:X.TurnTable.rotation})]})}))},ae=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)(),a=Object(P.e)(),c=a.camera,s=a.gl.domElement;Object(P.c)((function(){!e.targetSelected&&t.current&&e.setTarget(t.current.position.toArray())}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,onClick:function(t){e.targetSelected?e.setTargetSelected(!1):e.setTargetSelected(!0)},children:[Object(r.jsx)("sphereBufferGeometry",{args:[.08,16,16]}),Object(r.jsx)("meshPhongMaterial",{color:"orange"})]})),t.current&&Object(r.jsx)("dragControls",{ref:n,args:[[t.current],c,s]})]})},ce=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!1),a=Object(j.a)(n,2),c=a[0],s=a[1],i=Object(o.useState)(!1),b=Object(j.a)(i,2),d=b[0],u=b[1];return Object(r.jsxs)("mesh",Object(l.a)(Object(l.a)({},e),{},{ref:t,scale:d?[1.5,1.5,1.5]:[1,1,1],onClick:function(e){return u(!d)},onPointerOver:function(e){return s(!0)},onPointerOut:function(e){return s(!1)},children:[Object(r.jsx)("boxBufferGeometry",{args:[1,1,1]}),Object(r.jsx)("meshStandardMaterial",{color:c?"hotpink":"orange"})]}))},se=function(){var e=Object(o.useRef)(),t=Object(P.e)(),n=t.camera,a=t.gl.domElement;return Object(o.useEffect)((function(){e.current&&(e.current.target=new K.Vector3(0,1.6,0))})),Object(P.c)((function(){e.current&&e.current.update()})),Object(r.jsx)("orbitControls",{ref:e,args:[n,a],enableZoom:!0})};function ie(e){var t=Object(o.useState)(!1),n=Object(j.a)(t,2),a=n[0],c=n[1];return Object(r.jsx)("div",{className:"Render",children:Object(r.jsxs)(P.a,{camera:{position:[0,3,3]},children:[!a&&Object(r.jsx)(se,{}),Object(r.jsx)("directionalLight",{intensity:.8}),Object(r.jsx)("gridHelper",{}),Object(r.jsx)("pointLight",{position:[0,10,20]}),e.mode&&Object(r.jsx)(ae,{position:e.target,target:e.target,setTarget:e.setTarget,targetSelected:a,setTargetSelected:c}),Object(r.jsx)(oe,{target:e.target,setTarget:null,wrist_theta_delta:e.wrist_theta_delta,joints_theta_delta:e.joints_theta_delta,base_theta_delta:e.base_theta_delta,mode:e.mode,controlKeys:e.controlKeys})]})})}function le(e){return Object(r.jsx)("div",{style:{height:"100vh",overflow:"hidden"},children:Object(r.jsx)(ie,{mode:e.mode,controlKeys:e.controlKeys,target:e.target,setTarget:e.setTarget,base_theta_delta:e.base_theta_delta,joints_theta_delta:e.joints_theta_delta,wrist_theta_delta:e.wrist_theta_delta})})}n(66),n(67);var je={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,w:!1,s:!1,a:!1,d:!1,r:!1,f:!1,x:!1,z:!1},be={a:!1,d:!1,x:!1,z:!1};function de(){var e=Object(o.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(!1),b=Object(j.a)(c,2),d=b[0],u=b[1],O=Object(o.useState)([]),h=Object(j.a)(O,2),f=h[0],g=h[1],p=Object(o.useState)([[]]),x=Object(j.a)(p,2),m=x[0],_=x[1],v=Object(o.useState)(je),y=Object(j.a)(v,2),w=y[0],S=y[1],k=Object(o.useState)([1,0,0]),M=Object(j.a)(k,2),C=M[0],A=M[1],B=Object(o.useState)(.04),P=Object(j.a)(B,2),T=P[0],R=P[1],E=Object(o.useState)(.02),K=Object(j.a)(E,2),N=K[0],D=K[1],H=Object(o.useState)(.02),L=Object(j.a)(H,2),F=L[0],J=L[1],q=Object(o.useCallback)((function(e){S((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(i.a)({},e.key,!0))}))}),[]),z=Object(o.useCallback)((function(e){S((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(i.a)({},e.key,!1))}))}),[]),W=Object(o.useCallback)((function(e){e.key in be&&S((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(i.a)({},e.key,!0))}))}),[]),G=Object(o.useCallback)((function(e){e.key in be&&S((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(i.a)({},e.key,!1))}))}),[]);return Object(o.useEffect)((function(){window.addEventListener("keydown",q,!0)}),[q]),Object(o.useEffect)((function(){window.addEventListener("keyup",z,!0)}),[z]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(I,{mode:n,setControlMode:function(){n&&(a(!1),window.removeEventListener("keydown",W,!0),window.removeEventListener("keyup",G,!0),window.addEventListener("keydown",q,!0),window.addEventListener("keyup",z,!0))},setAutomaticMode:function(){n||(a(!0),S(je),window.removeEventListener("keydown",q,!0),window.removeEventListener("keyup",z,!0),window.addEventListener("keydown",W,!0),window.addEventListener("keyup",G,!0))},handleTaskRecord:function(){d?(u(!1),_([].concat(Object(s.a)(m),[f])),g([])):u(!0)},base_theta_delta:T,joints_theta_delta:N,wrist_theta_delta:F,setBaseSpeed:R,setJointSpeed:D,setWristSpeed:J,target:C,setTarget:A}),Object(r.jsx)(le,{mode:n,controlKeys:w,target:C,setTarget:A,base_theta_delta:T,joints_theta_delta:N,wrist_theta_delta:F})]})}c.a.render(Object(r.jsx)(de,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.309b54aa.chunk.js.map